<!DOCTYPE html>
<html>
<head>
    <title>User Data</title>
</head>
<body>
    <h1>User Reservations and Permits</h1>

    <!-- Filter Form -->
    <form method="GET" action="{{ url_for('user_data') }}">
        <label for="start_date">Start Date:</label>
        <input type="date" id="start_date" name="start_date" value="{{ request.args.get('start_date', '') }}">
        
        <label for="end_date">End Date:</label>
        <input type="date" id="end_date" name="end_date" value="{{ request.args.get('end_date', '') }}">
        
        <button type="submit">Filter</button>
    </form>

    <h2>Reservations</h2>
    <ul>
        {% for reservation in reservations %}
        <li>
            <strong>Park:</strong> {{ reservation.Park }} <br>
            <strong>Start Date:</strong> {{ reservation.StartDate }} <br>
            <strong>End Date:</strong> {{ reservation.EndDate }} <br>
            <strong>Number of People:</strong> {{ reservation.NumberOfPeople }}
        </li>
        {% endfor %}
    </ul>
    <div>
        <ul class="pagination">
            {% if pagination_reservations.has_prev %}
            <li><a href="{{ url_for('user_data', page=pagination_reservations.prev_num, per_page=request.args.get('per_page', 10), start_date=start_date, end_date=end_date) }}">Previous</a></li>
            {% endif %}
            {% for page_num in pagination_reservations.iter_pages() %}
            <li {% if page_num == pagination_reservations.page %}class="active"{% endif %}><a href="{{ url_for('user_data', page=page_num, per_page=request.args.get('per_page', 10), start_date=start_date, end_date=end_date) }}">{{ page_num }}</a></li>
            {% endfor %}
            {% if pagination_reservations.has_next %}
            <li><a href="{{ url_for('user_data', page=pagination_reservations.next_num, per_page=request.args.get('per_page', 10), start_date=start_date, end_date=end_date) }}">Next</a></li>
            {% endif %}
        </ul>
    </div>

    <h2>Permits</h2>
    <ul>
        {% for permit in permits %}
        <li>
            <strong>Permit Name:</strong> {{ permit.PermitEntranceName }} <br>
            <strong>Description:</strong> {{ permit.PermitEntranceDescription }} <br>
            <strong>Location:</strong> {{ permit.Town }}, {{ permit.District }}
        </li>
        {% endfor %}
    </ul>
    <div>
        <ul class="pagination">
            {% if pagination_permits.has_prev %}
            <li><a href="{{ url_for('user_data', page=pagination_permits.prev_num, per_page=request.args.get('per_page', 10), start_date=start_date, end_date=end_date) }}">Previous</a></li>
            {% endif %}
            {% for page_num in pagination_permits.iter_pages() %}
            <li {% if page_num == pagination_permits.page %}class="active"{% endif %}><a href="{{ url_for('user_data', page=page_num, per_page=request.args.get('per_page', 10), start_date=start_date, end_date=end_date) }}">{{ page_num }}</a></li>
            {% endfor %}
            {% if pagination_permits.has_next %}
            <li><a href="{{ url_for('user_data', page=pagination_permits.next_num, per_page=request.args.get('per_page', 10), start_date=start_date, end_date=end_date) }}">Next</a></li>
            {% endif %}
        </ul>
    </div>
</body>
</html>
